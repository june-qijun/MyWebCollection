<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>图文纵向无缝滚动特效</title>
		<meta name="keywords" content="图文,纵向,无缝滚动,特效">
		<meta name="description" content="图文纵向无缝滚动特效">
		<style style="text/css">
			*{margin:0;padding:0}
			body{background:#ccc;font:bold 14px/180% "微软雅黑";color:#888;}
			ul,li{list-style:none;}
			.wp{position:relative;
			   width:800px;
			   height:400px;
			   overflow:hidden;
			   margin:70px auto;
			   border:4px solid #121212;
			   background:#fff;}
			.slider{position:absolute;width:760px;padding:0 20px;left:0;top:0;}
			.fl{float:left;}
			.slider img{display:block;padding:2px;border:1px solid #ccc;} 
			.slider li{padding:20px 0;border-bottom:1px dashed #ccc;overflow:hidden;width:100%;}
			.slider p{font-size:12px;margin:10px;padding-left:75px;color:#333;line-height:20px;}
		</style>
	</head>
	<body>
		<div class="wp">
			<ul id="slider" class="slider">
				<li>
					<a class="fl" href="javascript:;"><img src="img/1.jpg" alt="" width="70px" height="70px"/></a>
					<p>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344
					<br>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344
					<br>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344
					<br>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344</p>
				</li>
				<li>
					<a class="fl" href="javascript:;"><img src="img/2.jpg" alt="" width="70px" height="70px"/></a>
					<p>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344
					<br>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344
					<br>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344
					<br>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344</p>
				</li>
				<li>
					<a class="fl" href="javascript:;"><img src="img/3.jpg" alt="" width="70px" height="70px"/></a>
					<p>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344
					<br>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344
					<br>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344
					<br>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344</p>
				</li>
				<li>
					<a class="fl" href="javascript:;"><img src="img/4.jpg" alt="" width="70px" height="70px"/></a>
					<p>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344
					<br>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344
					<br>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344
					<br>实现twitter和新浪微博自适应高度无缝滚动效果64635634345465463463443634634643346344</p>
				</li>
			</ul>
		</div>
		<script type="text/javascript">
			var __a,__b,__c;
			function H$(i) {return document.getElementById(i)}
			function H$$(c, p) {return p.getElementsByTagName(c)}
			var slider = function () {
				function init (o) {
					this.id = o.id;
					this.at = o.auto ? o.auto : 3;
					this.o = 0;
					this.pos();
				}
				init.prototype = {
					pos : function (){
					/**
					 * clearInterval() 方法可取消由 setInterval() 设置的 timeout
					 * scrollHeight：获取对象的滚动高度
					 */
						clearInterval(this.__b);
						this.o = 0;
						var el = H$(this.id), li = H$$('li', el), l = li.length;
						var _t = li[l-1].offsetHeight;
						/**
						 * cloneNode 方法
						 * 作        用：建立指定节点的复制。	　
						 * 基本语法：xmlDocumentNode.cloneNode(deep);
						 * 说        明：deep 是一个布尔值。如果为true，此节点会复制以指定节点发展出去的所有节点；
						 * 					   如果是false，只有指定的节点和它的属性被复制。
						*/
						var cl = li[l-1].cloneNode(true);
						/**
						* Opacity		设置一个标签的不透明度
						* filter		滤镜
						*/
						cl.style.opacity = 0; 
						// 这一条代码是为了IE浏览器实现不透明度为80%    因为如果用   opacity:0.8;   IE会不支持的
						cl.style.filter = 'alpha(opacity=0)';
						// insertBefore 方法 是在已有的节点前添加新的节点（相对于子节点来说的）
						el.insertBefore(cl, el.firstChild);
						el.style.top = -_t + 'px';
						this.anim();
					},
					// 隐藏
					anim : function () {
						var _this = this;
						this.__a = setInterval(function(){_this.animH()}, 20);
					},
					animH : function () {
						var _t = parseInt(H$(this.id).style.top), _this = this;
						if (_t >= -1) {
							clearInterval(this.__a);
							H$(this.id).style.top = 0;
							var list = H$$('li',H$(this.id));
							// 删除子节点
							H$(this.id).removeChild(list[list.length-1]);
							this.__c = setInterval(function(){_this.animO()}, 20);
							// this.auto();
						}else {
						// ceil(x) 对数进行上舍入   abs(x) 返回数的绝对值
							var __t = Math.abs(_t) - Math.ceil(Math.abs(_t)*.07);
							H$(this.id).style.top = -__t + 'px';
						}
					},
					// 隐藏
					animO : function () {
						this.o += 2;
						if (this.o == 100) {
							clearInterval(this.__c);
							H$$('li',H$(this.id))[0].style.opacity = 1;
							H$$('li',H$(this.id))[0].style.filter = 'alpha(opacity=100)';
							this.auto();
						}else {
							H$$('li',H$(this.id))[0].style.opacity = this.o/100;
							H$$('li',H$(this.id))[0].style.filter = 'alpha(opacity='+this.o+')';
						}
					},
					auto : function () {
						var _this = this;
						this.__b = setInterval(function(){_this.pos()}, this.at*1000);
					}
				}
				return init;
			}();
			new slider({id:'slider'});
		</script>
	</body>
</html>